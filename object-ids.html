<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-07-29
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140729" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MongoDB Jackson Mapper - Using Object IDs</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/devbliss/mongojack">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                <h2>MongoJack</h2>
                </a>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                                                                                                <img src="images/mongodb-leaf.png" />
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-07-29</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 2.1.0</li>
                      
                
                    
      
                                              
    <li class="pull-right">              <a href="http://maven.apache.org/" class="externalLink" title="Maven 2">
        Maven 2</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://maven.apache.org/maven-1.x/" class="externalLink" title="Maven 1.x">
        Maven 1.x</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://www.apache.org/" class="externalLink" title="Apache">
        Apache</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                  
      <li>
    
                          <a href="installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="tutorial.html" title="Tutorial">
          <i class="none"></i>
        Tutorial</a>
            </li>
                  
      <li>
    
                          <a href="changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Using Object IDs</h1>
<p>The simplest way to use ObjectId elements, both for document IDs and also for references to other documents (or anything) is to declare the field to have a type of <tt>org.bson.types.ObjectId</tt>. MongoJack will handle serialisation/deserialisation of these with no problems, no extra configuration is required.</p>
<p>However, there are some use cases where you may not want to use the ObjectId type, for example, if the same objects get serialised to the web, or if you just prefer dealing with more basic types. MongoJack provides <i>some</i> support for this, though there are a few areas that you need to be careful about.</p>
<div class="section">
<h2>@ObjectId<a name="aObjectId"></a></h2>
<p>The <tt>@org.mongojack.ObjectId</tt> annotation can be added to any <tt>String</tt> or <tt>byte[]</tt> field to indicate that you want its value to be stored as an ObjectId. It can also be added to <tt>org.mongojack.DBRef</tt> fields who&#x2019;s ID type paramater is <tt>String</tt> or <tt>byte[]</tt>, as well as collection/array fields and <tt>Map</tt> fields. This annotation instructs MongoJack to serialise the given value into an ObjectId, and deserialise any encountered ObjectIds into the type of the field. The following are all valid uses:</p>

<div class="source">
<pre>public class MyClass {
    @ObjectId
    public String _id;
    @ObjectId
    public byte[] someArbitraryId;
    @ObjectId
    public List&lt;String&gt; arbitraryCollectionOfIds;
    @ObjectId
    public DBRef&lt;AnotherClass, byte[]&gt; anotherObject;
    @ObjectId
    public List&lt;DBRef&lt;AnnotherClass, String&gt; collectionOfOtherObjects;
    @ObjectId
    public Map&lt;String, String&gt; mapOfStringsToObjectIds;
}
</pre></div>
<p>What is not currently supported is multi dimensional arrays/collections. Serialising map keys to ObjectIds are naturally not supported because MongoDB does not support ObjectIds as key values.</p>
<p>If using getters and setters, the annotation must be added to <i>both</i> the getter and the setter, for example:</p>

<div class="source">
<pre>public class MyClass {
    private String someId;
    @ObjectId
    public String getSomeId() {
        return someId;
    }
    @ObjectId
    public void setSomeId(String someId) {
        this.someId = someId;
    }
}
</pre></div>
<p>If using property based <tt>@JsonCreator</tt> methods, then it must be added to the parameter:</p>

<div class="source">
<pre>public class MyClass {
    private final String someId;
    @JsonCreator
    public MyClass(@ObjectId @JsonProperty(&quot;someId&quot;) someId) {
        this.someId = someId;
    }
    @ObjectId
    public String getSomeId() {
        return someId;
    }
}
</pre></div>
<p>If using custom (de)serialisers or delegate <tt>@JsonCreator</tt> methods, then you will need to handle the ObjectIds yourself.</p>
<p>If the setter for the <tt>_id</tt> field of the object is annotated with <tt>@ObjectId</tt>, then the <tt>*ById()</tt> methods on <tt>JacksonDBCollection</tt> will use serialise the passed in parameter to an ObjectId for you, and <tt>WriteResult.getSavedId()</tt> will deserialise it from ObjectId. If using a custom deserialiser for the bean, this will not work, even if the getter for the property is annotated with <tt>@ObjectId</tt>. This may be fixed in future, and is dependent on support from Jackson to give better information about configured serialisers.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2011-2014
                        <a href="http://www.devbliss.com">devbliss GmbH</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
